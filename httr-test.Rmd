
```{r}
library(httr2)
library(rvest)
library(tidyverse)
library(lubridate)
source("teams_fns.R")
source("soccerway_fns.R")
source("comp_fns.R")
source("update.R")
```

initialize games

```{r}
# initial game numbers
# games <- game_numbers_to_info()
```





```{r}
game_ids <- sample(3510000:3540000, 10)
game_ids
games <- update_games(game_ids, NULL)
games
```

update teams

```{r}
teams <- update_teams(teams, games)
teams
```

sometimes the wrong bit is extracted from the team info

```{r}
number_to_country(12046)
```


update comps

```{r}
comps <- update_comps(comps, games)
comps
```




display games

```{r}
games %>% 
  left_join(teams, by = c("t1"="id")) %>% 
  left_join(teams, by = c("t2"="id")) %>% 
  left_join(comps, by = c("comp" = "comp_id")) %>% 
  select(game, name.x, name.y, score, status, where, comp_name, timestamp) %>% 
  arrange(game)
```



```{r}
write_rds(games, "games.rds")
write_rds(teams, "teams.rds")
write_rds(comps, "comps.rds")
```

